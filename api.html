<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link rel="shortcut icon" href="../img/icon.ico">
    <link href="css/pure-min.css" rel="stylesheet" />
    <link href="css/code.css" rel="stylesheet" />
    <style>
        body{
            font:14px/1.5 arial,"Microsoft Yahei","Hiragino Sans GB",sans-serif;
        }
        .container {
            margin: 20px;
            position: relative;
            width: 1000px;
        }

        .main {
            width: 900px;
            /*border: 1px solid #ccc;*/
            min-height: 1500px;
            position: absolute;
            left: 270px;
            top: 40px;
        }

        .item {
            padding-left: 10px;
        }

        .describe {
            text-indent: 10px;
        }

        .nav {
            background: #0A1117;
            color: #e69b6b;
            position: fixed;
            top: 0;
            height: 50px;
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
            width: 100%;
            z-index: 100;
        }
        .nav  a{
            text-decoration:none;
             color: #e69b6b;
    font-size: 24px;
    line-height: 50px;
    height: 50px;
    display: inline-block;
        }
       .nav img{
           position:relative;
           left:10px;
           top:5px;
       }

       .nav .more {
           position:absolute;
           right:200px;
           top:0px;
       }
        .nav .more a{
             font-size: 14px;
             padding-left:20px;
       }

        .pure-menu .active{
            background-color:#f6ccb2;
        }

         pre {
            border-radius: 3px;
            word-wrap: break-word;
            border: 1px solid #ccc;
            overflow: auto;
            padding: .5em;
            background-color:#FDF6E3;
        }

         .footer{
             height:100px;
         }
    </style>
</head>
<body>
    <div class="nav">
        <a class="nav-home" href="index.html">
                    <img class="nav-logo" src="img/icon.png" width="36" height="36">
                    Nuclear
                </a>

        <div class="more">
            <a href="https://github.com/AlloyTeam/Nuclear">GitHub</a>
            <a href="http://www.alloyteam.com/">团队博客</a>
        </div>
    </div>
    <div id="navCtn">

    </div>

    <a href="https://github.com/AlloyTeam/Nuclear" target="_blank" style="position: fixed; right: 0; top: 0; z-index: 101; width: 140px; height: 140px;">
        <img src="http://alloyteam.github.io/AlloyGameEngine/AlloyPaper/example/asset/img/github.png" alt="">
    </a>
    <div class="container">


        <div class="main">
            <div class="item">
                <h2 id="el1">Nuclear.create</h2>
                <div class="describe">核心方法，用于创建组件</div>
                <h4>语法</h4>
                <pre class="javascript hljs"><code class="js"><span class="hljs-keyword">var</span> AnyComponent = Nuclear.create(obj);</code></pre>
                <h4>参数</h4>
                <table class="pure-table ">
                    <thead>
                        <tr>

                            <th>参数</th>
                            <th>类型</th>
                            <th>描述</th>
                            <th>是否必须</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>obj</td>
                            <td>对象字面量</td>
                            <td>组件的配置信息对象，一般包含render、style等方法</td>
                            <td>是</td>
                        </tr>
                    </tbody>

                </table>
                <h4>返回值</h4>
                <table class="pure-table">
                    <thead>
                        <tr>
                            <th>返回值</th>
                            <th>类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>AnyComponent</td>
                            <td>类型Component类</td>
                            <td>组件类，可以通过new AnyComponent()去实例化该类</td>

                        </tr>

                    </tbody>

                </table>
                <h4>实例</h4>
                <pre class="javascript hljs"><code class="js"><span class="hljs-keyword">var</span> TodoApp = Nuclear.create({
    add: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(evt)</span> </span>{
        evt.preventDefault();
        <span class="hljs-keyword">this</span>.option.items.push(<span class="hljs-keyword">this</span>.textBox.value);
    },
    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;div&gt;\
                    &lt;h3&gt;TODO&lt;/h3&gt;\
                    &lt;ul&gt; {{#items}} &lt;li&gt;{{.}}&lt;/li&gt; {{/items}}&lt;/ul&gt;\
                    &lt;form onsubmit="add(event)" &gt;\
                        &lt;input nc-id="textBox" type="text"  /&gt;\
                        &lt;button&gt;Add #{{items.length}}&lt;/button&gt;\
                    &lt;/form&gt;\
                &lt;/div&gt;'</span>;
    }
});<br/>
<span class="hljs-keyword">new</span> TodoApp({ items: [] }, <span class="hljs-string">"#todoListContainer"</span>);
</code></pre>
            </div>

             <div class="item">
                <h2 id="el2">Nuclear.Tpl.render</h2>
                <div class="describe">重写该方法用于模板引擎替换</div>
                <h4>实例</h4>
                <pre class="javascript hljs"><code class="js" >Nuclear.Tpl.render = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(tpl, data)</span></span>{
    <span class="hljs-keyword">return</span> template.compile(tpl)(data);
};

<span class="hljs-keyword">var</span> ArtTemplateApp = Nuclear.create({
    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;div&gt;\
                    &lt;h1&gt;{{title}}&lt;/h1&gt;\
                    &lt;ul&gt;\
                    {{each list as value i}}\
                        &lt;li&gt;索引 {{i + 1}} ：{{value}}&lt;/li&gt;\
                    {{/each}}\
                    &lt;/ul&gt;\
                &lt;/div&gt;'</span>;
    }
});

<span class="hljs-keyword">new</span> ArtTemplateApp( {
    title: <span class="hljs-string">'标签'</span>,
    list: [<span class="hljs-string">'文艺'</span>, <span class="hljs-string">'博客'</span>, <span class="hljs-string">'摄影'</span>, <span class="hljs-string">'电影'</span>, <span class="hljs-string">'民谣'</span>, <span class="hljs-string">'旅行'</span>, <span class="hljs-string">'吉他'</span>]
},<span class="hljs-string">"#container"</span>);
</code></pre>
                 <p>Nuclear.Tpl.render在Nuclear内部调用，不需要使用者调用。使用者可以选择重写该方法替换模板引擎。该方法接收两个参数，tpl是模板，data是数据，返回html字符串。上面的例子是把默认的模板引擎替换成 artTemplate。</p>
            </div>

             <div class="item">
                <h2 id="el3">install</h2>
                <div class="describe">组件组装</div>   
                <h4>实例</h4>
                <pre class="javascript hljs"><code class="js" ><span class="hljs-keyword">var</span> HelloMessage = Nuclear.create({
    install: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.option.name = <span class="hljs-keyword">this</span>.option.firstName + <span class="hljs-keyword">this</span>.option.lastName;
    },
    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;div&gt;Hello ,My name is {{name}} !&lt;/div&gt;'</span>;
    }
})

<span class="hljs-keyword">var</span> hm=<span class="hljs-keyword">new</span> HelloMessage( { firstName: <span class="hljs-string">"Zhang"</span> ,lastName:<span class="hljs-string">"Lei"</span> },<span class="hljs-string">"#helloContainer"</span>);
</code></pre>
                 <p>install方法会在nuclear内部优先执行，执行完才会进行属性监听。所以很明显，上面的name属性也进行了双向绑定。<code>hm.option.name</code>的修改会自动修改Dom。</p>
            </div>

             <div class="item">
                <h2 id="el4">style</h2>
                <div class="describe">组件样式</div>  
                    <h4>返回值</h4>
                <table class="pure-table">
                    <thead>
                        <tr>
                            <th>类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>字符串</td>
                            <td>必须符合css格式和语法，用于渲染组件的样式</td>

                        </tr>

                    </tbody>

                </table> 
                <h4>实例</h4>
                <pre class="javascript hljs"><code class="js"><span class="hljs-keyword">var</span> HelloMessage = Nuclear.create({
    style: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'.test a{ \
                    color: red;\
                    font-size: 100px;\
                }\
                span{\
                        background-color: green;\
                }'</span>;
    },
    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;div&gt;\
                    &lt;span class="test" &gt;\
                        &lt;a href="#"&gt;Test Style&lt;/a&gt;\
                    &lt;/span&gt;\
                &lt;/div&gt;'</span>;
    }
})

<span class="hljs-keyword">var</span> hm = <span class="hljs-keyword">new</span> HelloMessage( {  },<span class="hljs-string">"#helloContainer"</span>);
</code></pre>
                 <p>style方法会在nuclear内部执行，返回值必须是CSS格式的字符串。在style方法里面可以任性随意得写CSS选择器而不用担心污染其他组件。</p>
            </div>

             <div class="item">
                <h2 id="el5">render</h2>
                <div class="describe">组件模板结构</div>  
                    <h4>返回值</h4>
                <table class="pure-table">
                    <thead>
                        <tr>
                            <th>类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>字符串</td>
                            <td>必须符合模板引擎语法，用于渲染组件的结构</td>

                        </tr>

                    </tbody>

                </table> 
               
                 <p>如果没有重写Nuclear.Tpl.render方法，则按照mustachejs的语法写就可以。</p>
            </div>

            <div class="item">
                <h2 id="el6">installed</h2>
                <div class="describe">组件组装完成执行</div>   
            </div>

            <div class="item">
                <h2 id="el7">onRefresh</h2>
                <div class="describe">组件刷新执行的回调</div>   
            </div>

            <div class="item">
                <h2 id="el8">onOptionChange</h2>
                <div class="describe">组件option变更执行的回调</div>   
                 <h4>参数</h4>
                <table class="pure-table ">
                    <thead>
                        <tr>

                            <th>参数</th>
                            <th>类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                            <td>prop</td>
                            <td>字符串</td>
                            <td>组件option被更改的属性名</td>
                          
                        </tr>
                        <tr>
                            <td>value</td>
                            <td>object</td>
                            <td>组件option更新的值</td>
                        </tr>
                        <tr>
                            <td>oldValue</td>
                            <td>任意对象</td>
                            <td>组件option更新前的值</td>
                        </tr>
                        <tr>
                            <td>path</td>
                            <td>字符串</td>
                            <td>组件option更改的path路径，用来描述option树中的拿个属性被更改</td>
                      
                        </tr>
                    </tbody>

                </table>
                <h4>返回值</h4>
                <table class="pure-table">
                    <thead>
                        <tr>
                           
                            <th>类型</th>
                            <th>描述</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr>
                           
                            <td>Boolean</td>
                            <td>返回true代表会重新刷新dom节点，返回false或者undefined代表不触发dom的刷新（这样的话，刷新dom的逻辑可以自己写在onOptionChange里）</td>

                        </tr>

                    </tbody>

                </table>
                <h4>实例</h4>
                <pre class="javascript hljs"><code class="js"><span class="hljs-keyword">var</span> Carousel = Nuclear.create({
    installed: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">this</span>.links = <span class="hljs-keyword">this</span>.nav.querySelectorAll(<span class="hljs-string">'a'</span>);
        <span class="hljs-keyword">this</span>.active();
    },
    to: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(index)</span> </span>{
        <span class="hljs-keyword">this</span>.option.index = index;
    },
    active: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        util.removeClass(<span class="hljs-keyword">this</span>.links, <span class="hljs-string">"active"</span>);
        util.addClass(<span class="hljs-keyword">this</span>.links[<span class="hljs-keyword">this</span>.option.index], <span class="hljs-string">"active"</span>);
    },
    onOptionChange: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(prop, value, oldValue, path)</span> </span>{
        <span class="hljs-keyword">if</span> (prop === <span class="hljs-string">"index"</span>) {
            <span class="hljs-keyword">this</span>.carouselScroll.style.left = value * -<span class="hljs-number">100</span> + <span class="hljs-string">"%"</span>;
            <span class="hljs-keyword">this</span>.active();
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    },
    style: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">".nuclear-carousel-box { transition: left 1s cubic-bezier(0.22, 0.61, 0.36, 1); }"</span>;
    },
    render: <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">var</span> imgCount = <span class="hljs-keyword">this</span>.option.imgs.length;
        <span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;div class="nuclear-carousel"&gt;\
                    &lt;div style="width: '</span> + imgCount * <span class="hljs-number">100</span> + <span class="hljs-string">'%; left: '</span> + <span class="hljs-keyword">this</span>.option.index * -<span class="hljs-number">100</span> + <span class="hljs-string">'%;" nc-id="carouselScroll" class="nuclear-carousel-box"&gt;\
                        {{#imgs}}&lt;img style=" width:'</span>+ <span class="hljs-number">100</span> / imgCount + <span class="hljs-string">'%;" src="{{.}}" /&gt; {{/imgs}}\
                    &lt;/div&gt;\
                    &lt;div nc-id="nav"  class="nuclear-nav"&gt; \
                        {{#imgs}}&lt;a onclick="to({{@index}})"&gt;&lt;/a&gt; {{/imgs}}&lt;/div&gt;\
                &lt;/div&gt;'</span>;
    }
});

<span class="hljs-keyword">new</span> Carousel({
    imgs: [<span class="hljs-string">"img/room.jpg"</span>, <span class="hljs-string">"img/sleep.jpg"</span>, <span class="hljs-string">"img/watch.jpg"</span>],
    index: <span class="hljs-number">0</span>
}, <span class="hljs-string">"#carouselContainer"</span>);
</code></pre>
                <p>个人比较喜欢这个例子，这个例子用了大部分Nuclear特性。可以看到onOptionChange当检测到变更属性为index的时候返回false阻止dom自动刷新，自己手动更改left，利用style方法内定义好的transition进行运动。</p>
            </div>
             <div class="footer"></div>
        </div>
         
    </div>

    <script src="js/nuclear.min.js"></script> 
    <script src="js/zepto.min.js"></script>
    <script>
        var Nav = Nuclear.create({
            scrollTo: function (evt, element) {
                evt.preventDefault();
                $("html")[0].scrollTop = $($(element).attr("href")).offset().top - 60;
                $("body")[0].scrollTop = $($(element).attr("href")).offset().top - 60;
                //$("html").scrollToTop($($(element).attr("href")).offset().top-60);
            },
            render: function () {
                return '    <div class="pure-menu pure-menu-open" style="width: 250px; position: fixed; top: 60px; left: 20px;">\
                                <a class="pure-menu-heading" style="font-size: 18px;">Nuclear API(0.0.6)</a>\
                                <ul>\
                                    <li class="pure-menu-heading">Core</li>\
                                    <li><a href="#el1"  onclick="scrollTo(event,this)">Nuclear.create</a></li>\
                                    <li><a href="#el2"  onclick="scrollTo(event,this)">Nuclear.Tpl.render</a></li>\
                                    <li class="pure-menu-heading">Component</li>\
                                    <li><a href="#el3"  onclick="scrollTo(event,this)">install</a></li>\
                                    <li><a href="#el4"  onclick="scrollTo(event,this)">style</a></li>\
                                    <li><a href="#el5"  onclick="scrollTo(event,this)">render</a></li>\
                                    <li><a href="#el6"  onclick="scrollTo(event,this)">installed</a></li>\
                                    <li><a href="#el7"  onclick="scrollTo(event,this)">onRefresh</a></li>\
                                    <li><a href="#el8"  onclick="scrollTo(event,this)">onOptionChange</a></li>\
                                </ul>\
                            </div>';
            }

        })

        new Nav({}, "#navCtn");
    </script>
</body>
</html>
